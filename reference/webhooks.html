<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/webhooks">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Webhooks | Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.peridio.com/reference/webhooks"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Webhooks | Docs"><meta data-rh="true" name="description" content="Webhooks egress events from Peridio to an HTTPS endpoint."><meta data-rh="true" property="og:description" content="Webhooks egress events from Peridio to an HTTPS endpoint."><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://docs.peridio.com/reference/webhooks"><link data-rh="true" rel="alternate" href="https://docs.peridio.com/reference/webhooks" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.peridio.com/reference/webhooks" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EBXD92WI74-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.6c746347.css">
<link rel="preload" href="/assets/js/runtime~main.40bf7d81.js" as="script">
<link rel="preload" href="/assets/js/main.ed083bd3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-color-black.svg" alt="Peridio logo color black" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-color-black.svg" alt="Peridio logo color black" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/reference/organizations">Reference</a><a class="navbar__item navbar__link" href="/guides/introduction-to-binary-management">Guides</a><a class="navbar__item navbar__link" href="/admin-api">Admin API</a><a class="navbar__item navbar__link" href="/device-api">Device API</a><a class="navbar__item navbar__link" href="/cli">CLI</a><a class="navbar__item navbar__link" href="/agent">Agent</a></div><div class="navbar__items navbar__items--right"><a href="https://console.cremini.peridio.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Web Console<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/reference/overview">Overview<!-- --> </a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link"><b>Account Management</b></a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/organizations">Organizations<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/peridio-resource-names">Peridio Resource Names<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/users">Users<!-- --> </a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link"><b>Binary Management</b></a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/artifacts">Artifacts<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/artifact-versions">Artifact Versions<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/binaries">Binaries<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/binary-parts">Binary Parts<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/binary-signatures">Binary Signatures<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/signing-keys">Signing Keys<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/firmware">Firmware<!-- --> <span class="legacy_NFA6">Legacy</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active"><b>Data Management</b></a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reference/webhooks">Webhooks<!-- --> </a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link"><b>Device Management</b></a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/ca-certificates">CA Certificates<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/cohorts">Cohorts<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/device-certificates">Device Certificates<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/devices">Devices<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/just-in-time-provisioning">Just in Time Provisioning<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/products">Products<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/verification-certificates">Verification Certificates<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/verification-codes">Verification Codes<!-- --> </a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link"><b>Release Mangement</b></a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/bundles">Bundles<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/deployments">Deployments<!-- --> <span class="legacy_NFA6">Legacy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/releases">Releases<!-- --> </a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Webhooks</h1><p>Webhooks egress events from Peridio to an HTTPS endpoint.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="security">Security<a href="#security" class="hash-link" aria-label="Direct link to Security" title="Direct link to Security">​</a></h2><ul><li>Require TLS to enforce encrypted communications.</li><li>Provide HMAC-SHA256 request signatures.</li><li>Provide published at data to prevent replay attacks.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="secrets">Secrets<a href="#secrets" class="hash-link" aria-label="Direct link to Secrets" title="Direct link to Secrets">​</a></h3><p>Webhook secrets are the upcased hex-encoding of 128-bit secrets. They are rollable with a client-configurable transition window where dual signatures are provided temporarily.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="signature-verification">Signature verification<a href="#signature-verification" class="hash-link" aria-label="Direct link to Signature verification" title="Direct link to Signature verification">​</a></h3><p>Webhook requests are signed via HMAC-SHA256.</p><p>To verify this signature you will need to calculate an expected signature and compare it. If they match, the signature has been verified to be correct.</p><p>To calculate the signature, you need the following data:</p><ul><li>The webhook&#x27;s secret.</li><li>The webhook request&#x27;s:<ul><li><code>peridio-signature</code> header.</li><li><code>peridio-published-at</code> header.</li><li>body.</li></ul></li></ul><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>sensitive operations</div><div class="admonitionContent_S0QG"><p>It is critical that your own code as well as any tools you use do not alter the headers or body in any way prior to signature verification as doing so will cause it to fail.</p></div></div><p><strong>Verification process</strong></p><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>dual signatures</div><div class="admonitionContent_S0QG"><p>When you roll a webhook&#x27;s secret, depending on whether you provide a TTL or not and what the value is, there may be up to two active secrets at once. When this happens, the value of the signature header will include two signatures seperated by a comma like <code>&lt;sig1&gt;,&lt;sig2&gt;</code> instead of just one like <code>&lt;sig1&gt;</code>.</p></div></div><ol><li>Obtain value of <code>peridio-signature</code> header.<ul><li>Keep in mind their may be two values here if you rolling secrets with a transition window. If your expected computed signature matches either signature, the request is valid.</li></ul></li><li>Obtain value of <code>peridio-published-at</code> header.</li><li>Obtain request body.</li><li>Prepare the to-be-signed payload by concatentating:<ul><li>The published at value.</li><li>The request body.</li></ul></li><li>Compute the HMAC-SHA256 over the to-be-signed payload using the webhook&#x27;s secret.</li></ol><p><strong>Verification example</strong></p><p>You can use the following example values to validate your signature verification logic.</p><ul><li>Webhook secret: <code>B284A51B143841695B2D7BF3B8554731</code>.</li><li>Published at: <code>2000-01-01T00:00:00Z</code>.</li><li>Body:<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;prn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:event:a727838c-0195-4ccf-8258-cebf4608db8e&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;device&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;inserted_at&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;2023-09-14T20:23:30Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;type&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;release_changed&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;data&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;device&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;identifier&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;SN1337&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;prn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:device:a2edbb76-5f44-4202-860d-74a8c17d65aa&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;from_release&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;prn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:release:499b64fb-1420-4f58-8c73-e5497e1f531e&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;1.0.0&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;to_release&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token property" style="color:#36acaa">&quot;prn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:release:f456986f-1a2f-4d73-8f70-96ff05a6bce7&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token property" style="color:#36acaa">&quot;version&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;2.0.0&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul><p>Give the above, the to-be-signed payload would be:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">2000-01-01T00:00:00Z{&quot;version&quot;:1,&quot;prn&quot;:&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:event:a727838c-0195-4ccf-8258-cebf4608db8e&quot;,&quot;type&quot;:&quot;device&quot;,&quot;inserted_at&quot;:&quot;2023-09-14T20:23:30Z&quot;,&quot;data&quot;:{&quot;type&quot;:&quot;release_changed&quot;,&quot;data&quot;:{&quot;device&quot;:{&quot;identifier&quot;:&quot;SN1337&quot;,&quot;prn&quot;:&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:device:a2edbb76-5f44-4202-860d-74a8c17d65aa&quot;},&quot;from_release&quot;:{&quot;prn&quot;:&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:release:499b64fb-1420-4f58-8c73-e5497e1f531e&quot;,&quot;version&quot;:&quot;1.0.0&quot;},&quot;to_release&quot;:{&quot;prn&quot;:&quot;prn:1:4e33149b-637d-4679-b64f-4905e7a0cf8c:release:f456986f-1a2f-4d73-8f70-96ff05a6bce7&quot;,&quot;version&quot;:&quot;2.0.0&quot;}}}}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Compute the HMAC-SHA256 over the to-be-signed payload using the webhook&#x27;s secret.</p><p>The expected computed value is:</p><div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">FC825FCAA2E4C2688F075144105B75C2943D8B88AC4B5FAB134F2676A63FB6EF</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For valid requests, that should match the value provided by the <code>peridio-signature</code> header.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="replay-attacks">Replay attacks<a href="#replay-attacks" class="hash-link" aria-label="Direct link to Replay attacks" title="Direct link to Replay attacks">​</a></h3><p>To protect against replay attacks, the published at header should be checked for staleness. Reject webhook requests whose published at value is sufficiently old given the current time and your security posture. We recommend a tolerance of 5 minutes. Ensure your servers performing this verification have accurate time via NTP or other means.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="timing-attacks">Timing attacks<a href="#timing-attacks" class="hash-link" aria-label="Direct link to Timing attacks" title="Direct link to Timing attacks">​</a></h3><p>To protect against timing attacks, use a constant-time string comparison to compare the expected signature to each of the received signatures.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="url-verification">URL verification<a href="#url-verification" class="hash-link" aria-label="Direct link to URL verification" title="Direct link to URL verification">​</a></h2><p>Peridio performs URL verification to help prevent misconfiguration of webhooks. When enabling a webhook, and when updating the <code>url</code> field of an enabled webhook, the operation will only succeed if URL verification succeeds.</p><p>During URL verification, Peridio will execute a webhook request that publishes a <a href="#test_fire">webhook.test_fire event</a>. For verification to succeed, a timely 200 must be returned.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="deduplication">Deduplication<a href="#deduplication" class="hash-link" aria-label="Direct link to Deduplication" title="Direct link to Deduplication">​</a></h2><p>The events that webhooks publish have a <a href="/reference/peridio-resource-names">PRN</a> field that can be used for deduplication.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="client-endpoint-requirements">Client endpoint requirements<a href="#client-endpoint-requirements" class="hash-link" aria-label="Direct link to Client endpoint requirements" title="Direct link to Client endpoint requirements">​</a></h2><p>The client endpoint in this context is a webhook&#x27;s <code>url</code> field.</p><ul><li>Must be prefixed with <code>https://</code>.</li><li>Must immediately return a <code>200</code> upon receipt and signature verification. For example, you must return a <code>200</code> response before updating a record in your system.</li><li>Must be operational at the time of enabling a webhook, or at the time of the update if updating the <code>url</code> of an enabled webhook.</li><li>HTTP method:  <code>POST</code>.</li><li>Max <code>url</code> length: <code>1028</code>.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="retries">Retries<a href="#retries" class="hash-link" aria-label="Direct link to Retries" title="Direct link to Retries">​</a></h2><p>Peridio will retry webhook delivery for up to 3 days with a jittered backoff.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-filtering">Event filtering<a href="#event-filtering" class="hash-link" aria-label="Direct link to Event filtering" title="Direct link to Event filtering">​</a></h2><p>Peridio supports Peridio-side event filtering. This means that only the events that you are interested in are published. Leverage the enabled events options in the API and CLI to control this.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p><code>webhook.test_fire</code> events created as part of URL verification are published regardless of the webhook&#x27;s <code>state</code> and <code>enabled_events</code>. Test fire events created with the Peridio API <a href="/admin-api#webhooks/operation/test-fire-webhook">test-fire-webhook</a> endpoint are published regardless of the webhook&#x27;s state, but they require the webhook&#x27;s <code>state</code> to be <code>enabled</code>.</p></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-events">Supported events<a href="#supported-events" class="hash-link" aria-label="Direct link to Supported events" title="Direct link to Supported events">​</a></h2><ul><li>device<ul><li><a href="/admin-api#device-events/operation/device-checked-for-release">checked-for-release</a></li><li><a href="/admin-api#device-events/operation/device-claimed-release">claimed-release</a></li><li><a href="/admin-api#device-events/operation/device-connected">connected</a></li><li><a href="/admin-api#device-events/operation/device-release-changed">release-changed</a></li></ul></li><li>webhook<ul><li><a href="/admin-api#webhook-events/operation/webhook-test-fire">test-fire</a></li></ul></li></ul><div class="theme-admonition theme-admonition-info alert alert--info admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>request failed</div><div class="admonitionContent_S0QG"><p>The webhook <a href="/admin-api#webhook-events/operation/webhook-request-failed">request-failed</a> event is <em>not</em> supported - Peridio does not publish webhook request-failed events as it facilitates cascading recursive failures.</p></div></div></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/reference/firmware"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Firmware</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reference/ca-certificates"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">CA Certificates</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#security" class="table-of-contents__link toc-highlight">Security</a><ul><li><a href="#secrets" class="table-of-contents__link toc-highlight">Secrets</a></li><li><a href="#signature-verification" class="table-of-contents__link toc-highlight">Signature verification</a></li><li><a href="#replay-attacks" class="table-of-contents__link toc-highlight">Replay attacks</a></li><li><a href="#timing-attacks" class="table-of-contents__link toc-highlight">Timing attacks</a></li></ul></li><li><a href="#url-verification" class="table-of-contents__link toc-highlight">URL verification</a></li><li><a href="#deduplication" class="table-of-contents__link toc-highlight">Deduplication</a></li><li><a href="#client-endpoint-requirements" class="table-of-contents__link toc-highlight">Client endpoint requirements</a></li><li><a href="#retries" class="table-of-contents__link toc-highlight">Retries</a></li><li><a href="#event-filtering" class="table-of-contents__link toc-highlight">Event filtering</a></li><li><a href="#supported-events" class="table-of-contents__link toc-highlight">Supported events</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Peridio.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.40bf7d81.js"></script>
<script src="/assets/js/main.ed083bd3.js"></script>
</body>
</html>
<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-reference/firmwares">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Firmwares | Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.peridio.com/reference/firmwares"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Firmwares | Docs"><meta data-rh="true" name="description" content="Firmwares are the data you wish to distribute to devices."><meta data-rh="true" property="og:description" content="Firmwares are the data you wish to distribute to devices."><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://docs.peridio.com/reference/firmwares"><link data-rh="true" rel="alternate" href="https://docs.peridio.com/reference/firmwares" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.peridio.com/reference/firmwares" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EBXD92WI74-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Docs" href="/opensearch.xml"><link rel="stylesheet" href="/assets/css/styles.97bf50e3.css">
<link rel="preload" href="/assets/js/runtime~main.6ae35bc6.js" as="script">
<link rel="preload" href="/assets/js/main.460fcce3.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-color-black.svg" alt="Peridio logo color black" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo-color-black.svg" alt="Peridio logo color black" class="themedImage_ToTc themedImage--dark_i4oU"></div></a><a class="navbar__item navbar__link" href="/reference">Reference</a><a class="navbar__item navbar__link" href="/guides">Guides</a><a class="navbar__item navbar__link" href="/admin-api">Admin API</a><a class="navbar__item navbar__link" href="/device-api">Device API</a><a class="navbar__item navbar__link" href="/cli">CLI</a><a class="navbar__item navbar__link" href="/agent">Agent</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="/reference">General Availability</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/agent">Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/ca-certificates">CA Certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/deployments">Deployments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/device-certificates">Device Certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/devices">Devices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/firmware-signing-keys">Firmware Signing Keys</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/reference/firmwares">Firmwares</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/just-in-time-provisioning">Just in Time Provisioning</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/organizations">Organizations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/peridio-resource-names">Peridio Resource Names</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/products">Products</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/users">Users</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/verification-certificates">Verification Certificates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/reference/verification-codes">Verification Codes</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/reference-experimental">Experimental</a><button aria-label="Toggle the collapsible sidebar category &#x27;Experimental&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Firmwares</h1></header><p>Firmwares are the data you wish to distribute to devices.</p><p>Peridio requires the use of <a href="https://github.com/fwup-home/fwup" target="_blank" rel="noopener noreferrer">fwup</a> archives as the packaging format for firmwares. This means the binaries you upload to Peridio and the binaries your devices will download from Peridio are fwup archives. The contents of an archive are up to you; ranging from no files, to 1 file, to <code>n</code> files. They are capable of packaging an arbitrary stringy metadata payload. Note that fwup archives themselves are ZIP archives and can be interacted with as such.</p><p>To learn more about how to use firmware, see the <a href="/guides/creating-firmware">creating firmware</a> guide.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="firmware-installation">Firmware Installation<a class="hash-link" href="#firmware-installation" title="Direct link to heading">​</a></h2><p>It is possible to perform firmware installation with Peridio in a self-managed or Peridio-managed fashion.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="self-managed">Self-Managed<a class="hash-link" href="#self-managed" title="Direct link to heading">​</a></h3><p>This approach means you are responsible for all device-side interactions with Peridio as well as executing any device-side operation thereafter. This buys absolute flexibility at the cost of owning the complexity yourself.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="peridio-managed">Peridio Managed<a class="hash-link" href="#peridio-managed" title="Direct link to heading">​</a></h3><p>The <a href="/agent">Peridio Agent</a> can be used to check for updates, stream their download (including automated delta updates), verify their signature, and install their contents. This buys efficient simplicity at the cost of flexibility.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="firmware-file-requirements">Firmware File Requirements<a class="hash-link" href="#firmware-file-requirements" title="Direct link to heading">​</a></h2><ul><li>Firmware files are signed fwup archives.</li><li>The following <a href="https://github.com/fwup-home/fwup#global-scope" target="_blank" rel="noopener noreferrer">global scope</a> options must be specified:<ul><li><code>meta-architecture</code> must have a value. Informational.</li><li><code>meta-platform</code> must have a value. Informational.</li><li><code>meta-product</code> must exactly match the name of a <a href="/reference/products">product</a> in your <a href="/reference/organizations">organization</a>. Defines the product within which the firmware will be scoped.</li><li><code>meta-version</code> must be a valid <a href="https://semver.org/spec/v2.0.0.html" target="_blank" rel="noopener noreferrer">semantic version</a>. Defines the version of the firmware.</li></ul></li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="time-to-live-ttl">Time to Live (TTL)<a class="hash-link" href="#time-to-live-ttl" title="Direct link to heading">​</a></h2><p>Firmwares can be configured on a per-firmware basis to be deleted automatically after a set amount of seconds by configuring their <code>ttl</code> field. Firmware associated with a deployment will never be automatically deleted. Dissassociating a firmware with a configured TTL from all deployments will cause the TTL to begin counting down again from its maximum value.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a class="hash-link" href="#example" title="Direct link to heading">​</a></h3><ol><li>Firmware (A) is created with <code>ttl: 60</code> and is associated with zero deployments.<ul><li>Firmware (A)&#x27;s TTL begins counting down and it will be automatically deleted once it runs out.</li></ul></li><li>Firmware (A) is associated with deployment (B).<ul><li>Firmware (A)&#x27;s TTL is ignored and it will not be automatically deleted.</li></ul></li><li>Firmware (A) is associated with deployment (C).<ul><li>Firmware (A) is now associated with two deployments, its TTL continues to be ignored and it still will not be automatically deleted.</li></ul></li><li>Deployment (B) is deleted.<ul><li>Firmware (A) is still associated with at least one deployment, its TTL continues to be ignored and it still will not be automatically deleted.</li></ul></li><li>Deployment (C) is deleted.<ul><li>Firmware (A) is associated with zero deployments, its TTL begins counting down from its maximum value of <code>60</code> and it will be automatically deleted once it runs out.</li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="delta-updates">Delta Updates<a class="hash-link" href="#delta-updates" title="Direct link to heading">​</a></h2><p>It is possible to ship delta updates with Peridio in a self-managed or Peridio-managed fashion.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="self-managed-1">Self-Managed<a class="hash-link" href="#self-managed-1" title="Direct link to heading">​</a></h3><p>This approach yields the greatest flexibility, but comes at the cost of complexity. It would mean you would be responsible for:</p><ol><li>Generating patch files yourself before submitting them as firmware to Peridio.</li><li>Ensuring you orchestrate your deployments in such a manner as to serve patch files to the correct devices.</li><li>Write the device code to apply the patch files.</li></ol><p>Note that with this approach you would not actually enable delta updates features in Peridio (check boxes in the Web Console nor fields in the API/CLI), as that is used only in the Peridio-Managed case.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="peridio-managed-1">Peridio-Managed<a class="hash-link" href="#peridio-managed-1" title="Direct link to heading">​</a></h3><p>This approach has Peridio automatically generate, serve, and apply patch files for you, but comes at the cost of flexibility and customization. In particular, the following requirements are imposed:</p><ul><li><p>Delta updates are enabled on a per deployment basis.</p></li><li><p>fwup must be used to apply updates, and it must be version 1.6.0 or greater.</p></li><li><p>While your fwup conf and archives may include arbitrary contents, only a file-resource named <code>rootfs.img</code> will be diffed/patched.</p></li><li><p>Your fwup conf&#x27;s tasks to write the <code>rootfs.img</code> must use the <code>delta-source-raw-offset</code>, <code>delta-source-raw-count</code>, and <code>raw_write</code> settings.</p><ul><li><p>If you wish to also use an A/B update scheme, the tasks may for example resemble the following:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">task upgrade.a {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on-resource rootfs.img {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delta-source-raw-offset=${ROOTFS_B_PART_OFFSET}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delta-source-raw-count=${ROOTFS_B_PART_COUNT}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        raw_write(${ROOTFS_A_PART_OFFSET})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task upgrade.b {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    on-resource rootfs.img {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delta-source-raw-offset=${ROOTFS_A_PART_OFFSET}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        delta-source-raw-count=${ROOTFS_A_PART_COUNT}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        raw_write(${ROOTFS_B_PART_OFFSET})</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/reference/firmware-signing-keys"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Firmware Signing Keys</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/reference/just-in-time-provisioning"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Just in Time Provisioning</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#firmware-installation" class="table-of-contents__link toc-highlight">Firmware Installation</a><ul><li><a href="#self-managed" class="table-of-contents__link toc-highlight">Self-Managed</a></li><li><a href="#peridio-managed" class="table-of-contents__link toc-highlight">Peridio Managed</a></li></ul></li><li><a href="#firmware-file-requirements" class="table-of-contents__link toc-highlight">Firmware File Requirements</a></li><li><a href="#time-to-live-ttl" class="table-of-contents__link toc-highlight">Time to Live (TTL)</a><ul><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#delta-updates" class="table-of-contents__link toc-highlight">Delta Updates</a><ul><li><a href="#self-managed-1" class="table-of-contents__link toc-highlight">Self-Managed</a></li><li><a href="#peridio-managed-1" class="table-of-contents__link toc-highlight">Peridio-Managed</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Peridio.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.6ae35bc6.js"></script>
<script src="/assets/js/main.460fcce3.js"></script>
</body>
</html>
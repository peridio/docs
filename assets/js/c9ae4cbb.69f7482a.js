"use strict";(self.webpackChunkparasola=self.webpackChunkparasola||[]).push([[5550],{3905:(e,t,a)=>{a.d(t,{Zo:()=>c,kt:()=>f});var r=a(7294);function n(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},l=Object.keys(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)a=l[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var s=r.createContext({}),p=function(e){var t=r.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},c=function(e){var t=p(e.components);return r.createElement(s.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},h=r.forwardRef((function(e,t){var a=e.components,n=e.mdxType,l=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),u=p(a),h=n,f=u["".concat(s,".").concat(h)]||u[h]||d[h]||l;return a?r.createElement(f,i(i({ref:t},c),{},{components:a})):r.createElement(f,i({ref:t},c))}));function f(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var l=a.length,i=new Array(l);i[0]=h;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o[u]="string"==typeof e?e:n,i[1]=o;for(var p=2;p<l;p++)i[p]=a[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,a)}h.displayName="MDXCreateElement"},1827:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>d,frontMatter:()=>l,metadata:()=>o,toc:()=>p});var r=a(7462),n=(a(7294),a(3905));const l={},i="Releases",o={unversionedId:"reference/releases",id:"reference/releases",title:"Releases",description:"Releases allow you to distribute bundles to cohorts.",source:"@site/docs/reference/releases.md",sourceDirName:"reference",slug:"/reference/releases",permalink:"/reference/releases",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"reference",previous:{title:"Deployments",permalink:"/reference/deployments"}},s={},p=[{value:"Latest Release",id:"latest-release",level:2},{value:"Availability",id:"availability",level:2},{value:"Types",id:"types",level:3},{value:"Graph Traversal",id:"graph-traversal",level:4},{value:"Scheduling",id:"scheduling",level:4},{value:"Phasing",id:"phasing",level:4},{value:"Required Release",id:"required-release",level:2},{value:"Update Resolution",id:"update-resolution",level:2},{value:"Release resolution",id:"release-resolution",level:3},{value:"Binary resolution",id:"binary-resolution",level:3}],c={toc:p},u="wrapper";function d(e){let{components:t,...a}=e;return(0,n.kt)(u,(0,r.Z)({},c,a,{components:t,mdxType:"MDXLayout"}),(0,n.kt)("h1",{id:"releases"},"Releases"),(0,n.kt)("p",null,"Releases allow you to distribute ",(0,n.kt)("a",{parentName:"p",href:"/reference/bundles"},"bundles")," to ",(0,n.kt)("a",{parentName:"p",href:"/reference/cohorts"},"cohorts"),"."),(0,n.kt)("p",null,"Each release belongs to an individual cohort."),(0,n.kt)("h2",{id:"latest-release"},"Latest Release"),(0,n.kt)("p",null,'When creating a release you may create it as the "latest release" or not. The latest release refers to the release within the cohort whose ',(0,n.kt)("inlineCode",{parentName:"p"},"next_release_prn")," is ",(0,n.kt)("inlineCode",{parentName:"p"},"null"),". It does not refer to the most recently inserted release. Only one release within a cohort at any given time may be the latest release."),(0,n.kt)("p",null,"The latest release of a cohort is special in that it is the only release within a cohort that is allowed to limit its availability via scheduling and phasing."),(0,n.kt)("admonition",{type:"info"},(0,n.kt)("p",{parentName:"admonition"},"You cannot create a new latest release while the current latest release is scheduled or phased.")),(0,n.kt)("h2",{id:"availability"},"Availability"),(0,n.kt)("p",null,"The availability of a release, the ability for devices to resolve it when checking for updates, is dictated by three concepts: graph traversal, scheduling, and phasing."),(0,n.kt)("h3",{id:"types"},"Types"),(0,n.kt)("h4",{id:"graph-traversal"},"Graph Traversal"),(0,n.kt)("p",null,"When creating releases within a cohort, they will form a release graph."),(0,n.kt)("p",null,"For example."),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"R4--------\x3eR5---\\\n                 \\\nR1---\\            |---\x3eR6\n      |---\x3eR2----/\nR3---/\n")),(0,n.kt)("p",null,"In order for a release on the graph to be relevant to you, it must be between your current release, and the latest release."),(0,n.kt)("p",null,"For example, if your current release was R4, then R5 is available with respect to graph traversal, but R2 is not. Keep in mind this is an instantaneous evaluation at it would be possible for example for the device to be factory reset to R1, at which point R2 would be traversible."),(0,n.kt)("h4",{id:"scheduling"},"Scheduling"),(0,n.kt)("p",null,"The latest release in a cohort can be scheduled to become available immediately, or a date in the future can be choosen. This allows you to stage a release ahead of time and have it become available automatically at a specific time."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},'When a release has been created, but its schedule date has not occurred yet, the release is said to be "scheduled". Keep in mind you cannot create a new latest release if the current latest release is scheduled.')),(0,n.kt)("p",null,"A release ceases to be scheduled once its schedule date has passed."),(0,n.kt)("h4",{id:"phasing"},"Phasing"),(0,n.kt)("p",null,"The latest release in a cohort can be made available gradually by configuring its phase value. This can be used to limit how many devices are allowed to take the release to either a percent of the cohort, or an absolute threshold of devices. Once the limit is met, the release is unavailable until the phase value is increased."),(0,n.kt)("admonition",{type:"tip"},(0,n.kt)("p",{parentName:"admonition"},'When a release\'s phase value is not 100%, the release is said to be "phased". Keep in mind you cannot create a new latest release if the current latest release is phased.')),(0,n.kt)("p",null,"A release ceases to be phased once its phase value is 100%."),(0,n.kt)("h2",{id:"required-release"},"Required Release"),(0,n.kt)("p",null,"A release can be configured with its ",(0,n.kt)("inlineCode",{parentName:"p"},"required")," field set to ",(0,n.kt)("inlineCode",{parentName:"p"},"true")," or ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),", and this field can be changed at any time."),(0,n.kt)("p",null,"When ",(0,n.kt)("inlineCode",{parentName:"p"},"true"),", devices that encounter this release are required to pass through it."),(0,n.kt)("p",null,"When ",(0,n.kt)("inlineCode",{parentName:"p"},"false"),", device can potentially skip the release if there is a newer subsequent release available."),(0,n.kt)("p",null,"For example:"),(0,n.kt)("pre",null,(0,n.kt)("code",{parentName:"pre"},"R4--------\x3eR5---\\\n                 \\\nR1---\\            |---\x3eR6\n      |---\x3eR2----/\nR3---/\n")),(0,n.kt)("p",null,"Lets say that ",(0,n.kt)("inlineCode",{parentName:"p"},"R2")," above is the only required release. If a device was on ",(0,n.kt)("inlineCode",{parentName:"p"},"R1"),", it would have to update to ",(0,n.kt)("inlineCode",{parentName:"p"},"R2")," first, even though ",(0,n.kt)("inlineCode",{parentName:"p"},"R6")," is already available. Whereas if a device was on ",(0,n.kt)("inlineCode",{parentName:"p"},"R4"),", it could update directly to ",(0,n.kt)("inlineCode",{parentName:"p"},"R6"),", because ",(0,n.kt)("inlineCode",{parentName:"p"},"R5")," is not required."),(0,n.kt)("h2",{id:"update-resolution"},"Update Resolution"),(0,n.kt)("p",null,"When a device performs the ",(0,n.kt)("a",{parentName:"p",href:"/admin-api#tag/devices/operations/get-device-update"},"get device update")," request, Peridio performs update resolution, which comprises release resolution and binary resolution, to determine if there is a release to update to, and to create a set of presigned URLs to facilitate the device acquiring compatible binaries."),(0,n.kt)("h3",{id:"release-resolution"},"Release resolution"),(0,n.kt)("p",null,"Release resolution is the process of determing if, given the current release of a device, there is another release, referred to as the target release, the device can update to."),(0,n.kt)("p",null,"This resolution is performed as follows:"),(0,n.kt)("ol",null,(0,n.kt)("li",{parentName:"ol"},"The device reports its current release to Peridio."),(0,n.kt)("li",{parentName:"ol"},"Peridio checks if that release belongs to the cohort that the device belongs to.",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"If yes, go to 3."),(0,n.kt)("li",{parentName:"ol"},"If no, release resolution fails."))),(0,n.kt)("li",{parentName:"ol"},"Peridio checks if there is a next release.",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"If yes, go to 4."),(0,n.kt)("li",{parentName:"ol"},"If no, release resolution succeeds with no target release. The device is up to date."))),(0,n.kt)("li",{parentName:"ol"},"Peridio checks if the release is required.",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"If yes, release resolution succeeds with a target release."),(0,n.kt)("li",{parentName:"ol"},"If no, go to 5."))),(0,n.kt)("li",{parentName:"ol"},"Peridio checks if there is a next release.",(0,n.kt)("ol",{parentName:"li"},(0,n.kt)("li",{parentName:"ol"},"If yes, go to 4."),(0,n.kt)("li",{parentName:"ol"},"If no, release resolution succeeds with a target release.")))),(0,n.kt)("p",null,"Peridio will recurse between 5.1 and 4 to skip as many not-required releases as possible."),(0,n.kt)("h3",{id:"binary-resolution"},"Binary resolution"),(0,n.kt)("p",null,"In the case that release resolution succeeds with a target release, binary resolution is then performed. Binary resolution is the process of looking at the target release's ",(0,n.kt)("a",{parentName:"p",href:"/reference/bundles"},"bundle"),", and then, for each of the bundle's ",(0,n.kt)("a",{parentName:"p",href:"/reference/artifact-versions"},"artifact versions"),", resolving a ",(0,n.kt)("a",{parentName:"p",href:"/reference/binaries#compatibility"},"compatible binary"),". If no compatible binary is found for any one or more of the artifact versions, binary resolution fails and the device will not be able to proceed."))}d.isMDXComponent=!0}}]);
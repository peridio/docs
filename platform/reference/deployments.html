<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-docs1 docs-version-current docs-doc-page docs-doc-id-platform/reference/deployments" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Deployments | Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.peridio.com/platform/reference/deployments"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-docs1-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-docs1-current"><meta data-rh="true" property="og:title" content="Deployments | Docs"><meta data-rh="true" name="description" content="A deployment makes firmware conditionally available to devices."><meta data-rh="true" property="og:description" content="A deployment makes firmware conditionally available to devices."><link data-rh="true" rel="icon" href="/img/logo.svg"><link data-rh="true" rel="canonical" href="https://docs.peridio.com/platform/reference/deployments"><link data-rh="true" rel="alternate" href="https://docs.peridio.com/platform/reference/deployments" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.peridio.com/platform/reference/deployments" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://EBXD92WI74-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Docs" href="/opensearch.xml">


<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XN33JD9H3F"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XN33JD9H3F",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.c7dd06ad.css">
<script src="/assets/js/runtime~main.1325cab2.js" defer="defer"></script>
<script src="/assets/js/main.b3aad7a3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-color-black.svg" alt="Peridio logo color black" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-color-black.svg" alt="Peridio logo color black" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="/platform/introduction">Platform</a><a class="navbar__item navbar__link" href="/integration/introduction">Integration</a><a class="navbar__item navbar__link" href="/admin-api">Admin API</a><a class="navbar__item navbar__link" href="/device-api">Device API</a><a class="navbar__item navbar__link" href="/cli">CLI</a></div><div class="navbar__items navbar__items--right"><a href="https://console.peridio.com" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Web Console<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/platform/introduction">Introduction<!-- --> </a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/platform/reference/overview">Reference<!-- --> </a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/reference/overview">Overview<!-- --> </a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/platform/reference/organizations">Account Management<!-- --> </a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/platform/reference/artifacts">Binary Management<!-- --> </a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/platform/reference/agent">Device Management<!-- --> </a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/platform/reference/webhooks">Integration Management<!-- --> </a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/platform/reference/bundles">Release Mangement<!-- --> </a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/reference/bundles">Bundles<!-- --> </a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/platform/reference/deployments">Deployments<!-- --> <span class="legacy_tSD1"><svg style="margin-right:0.4em" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14px"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>Legacy</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/platform/reference/releases">Releases<!-- --> </a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/platform/reference/tunnels">Remote Access<!-- --> <span class="labs_qdU7"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="14px"><path stroke-linecap="round" stroke-linejoin="round" d="M9.75 3.104v5.714a2.25 2.25 0 0 1-.659 1.591L5 14.5M9.75 3.104c-.251.023-.501.05-.75.082m.75-.082a24.301 24.301 0 0 1 4.5 0m0 0v5.714c0 .597.237 1.17.659 1.591L19.8 15.3M14.25 3.104c.251.023.501.05.75.082M19.8 15.3l-1.57.393A9.065 9.065 0 0 1 12 15a9.065 9.065 0 0 0-6.23-.693L5 14.5m14.8.8 1.402 1.402c1.232 1.232.65 3.318-1.067 3.611A48.309 48.309 0 0 1 12 21c-2.773 0-5.491-.235-8.135-.687-1.718-.293-2.3-2.379-1.067-3.61L5 14.5"></path></svg>Labs</span></a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/platform/guides/introduction-to-binary-management">Guides<!-- --> </a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Deployments</h1></header><p>A deployment makes <a href="/platform/reference/firmware">firmware</a> conditionally available to <a href="/platform/reference/devices">devices</a>.</p>
<div class="alert" style="border-left:var(--ifm-alert-border-left-width) solid chocolate;background:burlywood;padding:16px;margin-bottom:16px"><h5 style="align-items:center;display:flex;text-transform:uppercase"><svg style="margin-right:0.4em" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="19.6px"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"></path></svg>legacy</h5><div class="admonitionContent_node_modules-@docusaurus-theme-classic-lib-theme-Admonition-Layout-styles-module"><p>This functionality is not available to new organizations.</p><p>Superceded by <a href="/platform/reference/bundles">bundles</a> and <a href="/platform/reference/releases">releases</a>.</p><span>For more information, see <a href="/platform/introduction#legacy">content labels</a>.</span></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="deployment-eligibility">Deployment eligibility<a href="#deployment-eligibility" class="hash-link" aria-label="Direct link to Deployment eligibility" title="Direct link to Deployment eligibility">​</a></h2>
<p>When a device checks for an update with <a href="/device-api#devices/operation/get-device-update">get-device-update</a>, Peridio resolves which deployment, if any, is applicable to the requesting device, which dictates which firmware Peridio will respond to the request with.</p>
<p>For a device to be eligible for a particular deployment, the following conditions must be met:</p>
<ul>
<li>The deployment is active.</li>
<li>The deployment and the device are not quarantined and belong to the same organization and product.</li>
<li>The device must have at least the tags the deployment&#x27;s conditions specify.</li>
<li>If the deployment has a version condition, the device&#x27;s firmware&#x27;s version must satisfy it.</li>
<li>The device&#x27;s firmware and the deployment&#x27;s firmware have matching architecture and platforms, but distinct UUIDs.</li>
</ul>
<p>Peridio tracks metadata about the current firmware of devices. Devices dictate what Peridio considers their current firmware by supplying <a href="/device-api#section/Global-Headers"><code>x-peridio</code> headers</a> to the Peridio Device API.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tags">Tags<a href="#tags" class="hash-link" aria-label="Direct link to Tags" title="Direct link to Tags">​</a></h3>
<p>A deployment must specify at least one tag as a condition. A device must have at least all of the tags specified by the deployment in order to meet the condition.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="version">Version<a href="#version" class="hash-link" aria-label="Direct link to Version" title="Direct link to Version">​</a></h3>
<p>A deployment may optionally specify a SemVer version requirement. When specified, a device&#x27;s firmware&#x27;s version must satisfy the requirement. Firmware versions are <a href="https://semver.org/spec/v2.0.0.html" target="_blank" rel="noopener noreferrer">semantic versions</a>, for examples of what a version condition on a deployment may look like, reference <a href="https://hexdocs.pm/elixir/Version.html#module-requirements" target="_blank" rel="noopener noreferrer">https://hexdocs.pm/elixir/Version.html#module-requirements</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="quarantine">Quarantine<a href="#quarantine" class="hash-link" aria-label="Direct link to Quarantine" title="Direct link to Quarantine">​</a></h2>
<p>Deployment&#x27;s have a boolean <code>quarantined</code> field. When <code>true</code>, the deployment will not serve updates. Deployments can be automatically quarantined due to failure rate and failure threshold configurations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="failure-rates-and-thresholds">Failure rates and thresholds<a href="#failure-rates-and-thresholds" class="hash-link" aria-label="Direct link to Failure rates and thresholds" title="Direct link to Failure rates and thresholds">​</a></h2>
<p>Deployments allow you to configure failure rates and thresholds such that devices and deployments can be quarantined automatically in reaction to devices repeatedly asking for the same update from the same deployment via <a href="/device-api#devices/operation/get-device-update">get-device-update</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatically-quarantine-deployments">Automatically quarantine deployments<a href="#automatically-quarantine-deployments" class="hash-link" aria-label="Direct link to Automatically quarantine deployments" title="Direct link to Automatically quarantine deployments">​</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Failure rate</td><td>How many devices can have asked 2 or more times each for the same update from the same deployment within failure rate seconds before the deployment is automatically quarantined.</td></tr><tr><td>Failure rate seconds</td><td>The duration to use with failure rate.</td></tr><tr><td>Failure threshold</td><td>How many devices with firmware metadata whose architecture, platform, product, and uuid match that of the deployment&#x27;s firmware that can be simultaneously quarantined before the deployment is automatically quarantined.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="automatically-quarantine-devices">Automatically quarantine devices<a href="#automatically-quarantine-devices" class="hash-link" aria-label="Direct link to Automatically quarantine devices" title="Direct link to Automatically quarantine devices">​</a></h3>
<table><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td>Device failure rate</td><td>How many times a device can have asked for the same update from the same deployment within device failure rate seconds before the device is automatically quarantined.</td></tr><tr><td>Device failure rate seconds</td><td>The duration to use with device failure rate.</td></tr><tr><td>Device Failure threshold</td><td>How many times total a device can have asked for the same update from the same deployment before the device is automatically quarantined.</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clear-failure-rates-and-thresholds">Clear failure rates and thresholds<a href="#clear-failure-rates-and-thresholds" class="hash-link" aria-label="Direct link to Clear failure rates and thresholds" title="Direct link to Clear failure rates and thresholds">​</a></h3>
<ul>
<li>Unquarantining a deployment will cause device update attempts prior to that to be ignored in failure rates and thresholds.</li>
<li>Unquarantining a device will cause its update attempts prior to that to be ignored in failure rates and thresholds.</li>
<li><a href="/admin-api#device-events/operation/device-release-changed"><code>device.release_changed</code></a> and <a href="/admin-api#device-events/operation/device-firmware-changed"><code>device.firmware_changed</code></a> events cause update attempts prior to them to be ignored in failure rates and thresholds.</li>
</ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/platform/reference/bundles"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Bundles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/platform/reference/releases"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Releases</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#deployment-eligibility" class="table-of-contents__link toc-highlight">Deployment eligibility</a><ul><li><a href="#tags" class="table-of-contents__link toc-highlight">Tags</a></li><li><a href="#version" class="table-of-contents__link toc-highlight">Version</a></li></ul></li><li><a href="#quarantine" class="table-of-contents__link toc-highlight">Quarantine</a></li><li><a href="#failure-rates-and-thresholds" class="table-of-contents__link toc-highlight">Failure rates and thresholds</a><ul><li><a href="#automatically-quarantine-deployments" class="table-of-contents__link toc-highlight">Automatically quarantine deployments</a></li><li><a href="#automatically-quarantine-devices" class="table-of-contents__link toc-highlight">Automatically quarantine devices</a></li><li><a href="#clear-failure-rates-and-thresholds" class="table-of-contents__link toc-highlight">Clear failure rates and thresholds</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Peridio.</div></div></div></footer></div>
</body>
</html>